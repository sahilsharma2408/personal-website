---
title: "Deploying to Cloudflare Pages"
date: "2025-01-20"
description: "Cloudflare Pages offers blazing-fast deployments with global edge distribution. Here's how to deploy your React Router app to Cloudflare Pages in minutes."
tags: ["Cloudflare", "DevOps", "React Router"]
readTime: "6 min read"
published: true
---

Cloudflare Pages has become my go-to deployment platform for web applications. With its global edge network spanning over 300 cities, generous free tier, and seamless Git integration, it's hard to beat for deploying modern web apps. Here's everything you need to know to deploy a React Router v7 application to Cloudflare Pages.

## Why Cloudflare Pages

There are plenty of hosting options out there, but Cloudflare Pages stands out for a few reasons. First, performance: your site is served from the edge location closest to each visitor, resulting in consistently low latency worldwide. Second, the free tier is genuinely generous -- unlimited bandwidth, 500 builds per month, and the ability to run server-side code at the edge with Workers.

Third, and perhaps most importantly, the developer experience is excellent. Push to Git, and your site deploys automatically. Preview deployments for every pull request. Rollbacks are instant.

## Setting Up wrangler.toml

The `wrangler.toml` file is your configuration file for Cloudflare. For a React Router v7 app, the setup is straightforward:

```toml
name = "my-website"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]
pages_build_output_dir = "./build/client"

[vars]
ENVIRONMENT = "production"
```

The `pages_build_output_dir` tells Cloudflare where your static assets live after the build. The `nodejs_compat` flag enables Node.js API compatibility, which many npm packages depend on.

## Deploying with Git Integration

The simplest deployment method is connecting your GitHub or GitLab repository directly to Cloudflare Pages:

1. Go to the Cloudflare dashboard and create a new Pages project
2. Connect your Git repository
3. Set the build command to `pnpm run build`
4. Set the build output directory to `build/client`
5. Add any environment variables your app needs

Every push to your main branch triggers a production deployment. Pull requests automatically get preview URLs, making it easy for teammates to review changes before they go live.

## GitHub Actions for More Control

If you need more control over the deployment process -- perhaps to run tests first or to build in a specific way -- you can use GitHub Actions with the Wrangler CLI:

```yaml
name: Deploy
on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: pnpm/action-setup@v4
      - uses: actions/setup-node@v4
        with:
          node-version: 20
          cache: pnpm
      - run: pnpm install
      - run: pnpm run build
      - uses: cloudflare/wrangler-action@v3
        with:
          apiToken: ${{ secrets.CLOUDFLARE_API_TOKEN }}
          command: pages deploy build/client --project-name=my-website
```

This approach gives you full control over the CI pipeline while still leveraging Cloudflare's deployment infrastructure.

## Environment Variables

Cloudflare Pages supports environment variables through the dashboard or `wrangler.toml`. For secrets like API keys, always use the dashboard rather than committing them to your config file.

In your React Router loaders and actions, you can access these through the `context` parameter:

```ts
export async function loader({ context }: Route.LoaderArgs) {
  const env = context.cloudflare.env;
  const apiKey = env.API_KEY;
  // ...
}
```

## Using D1 Database and KV Storage

Cloudflare's ecosystem includes powerful data storage options. D1 is a serverless SQLite database that runs at the edge, perfect for content-heavy sites. KV (Key-Value) storage is ideal for caching and session data.

To bind a D1 database, add it to your `wrangler.toml`:

```toml
[[d1_databases]]
binding = "DB"
database_name = "my-database"
database_id = "your-database-id"
```

Then access it in your loaders just like environment variables through the Cloudflare context.

## Tips and Gotchas

**Node.js APIs**: Not everything from Node.js is available in the Workers runtime. The `nodejs_compat` flag covers most common APIs, but if you hit an incompatibility, check Cloudflare's documentation for supported APIs.

**Build size limits**: Workers have a 10MB limit for the compressed bundle. Keep your server-side dependencies lean. Use dynamic imports to split code where possible.

**Cold starts**: Cloudflare Workers are lightweight and start in milliseconds, but be mindful of initialization code that runs on every request. Keep module-level code minimal.

**Preview deployments**: Every branch and PR gets its own URL. Use this to test changes in a production-like environment before merging.

Cloudflare Pages is a powerful platform that makes deployment a solved problem. Set it up once, and you can focus on building features instead of managing infrastructure.
